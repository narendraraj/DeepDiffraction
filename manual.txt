Manual (script version)

System Requirement:
1. Cuda GPU (4GB memory or more)
2. CPU calculation is also supported (2016b and later version), but it is slow (~10-30s/pattern).
3. Matlab 2016a and later version is required. 
4. For Pascal GPU, Matlab 2017a and later version is required.


main_PACBED_identify_demo.m
-----------FUNCTION--------------
1. Align a series of PACBEDs
2. Measure their thickness and tilt values
-----------HOW TO RUN------------
1. Contact Prof. LeBeau to get all large network files before run the code
2. Setup network name correctly in the 'load NN model for PACBED section'
3. Setup input data in the 'load data' section, you can call file_load function for direct input from image files
4. Setup parameters in the 'PACBED alignment' section
5. Setup parameters in the 'thickness/tilt measurement' section
6. Run code (recommend Run Section)
-------------OUTPUT--------------
1. Output thickness/tilt measurement are in the 'thickness_determine' and 'tilt_determine' variables, respectively
2. Aligned images are in the 'img_out' cells. call 'Img_series_Looper(img_out, name_list)' to view
3. Center, shift and rotation angle of PACBEDs can be found in 'para_in' cell



main_PACBED_identify_4D_STEM_demo.m
-----------FUNCTION--------------
1. Align PACBEDs from 4D-STEM
2. Measure their thickness and tilt values
-----------HOW TO RUN------------
1. Contact Prof. LeBeau to get all large network files before run the code
2. Setup network name correctly in the 'load NN model for PACBED section'
3. Setup input data in the 'load database' section
4. Setup parameters in the 'PACBED alignment' section
5. Setup parameters in the 'thickness/tilt measurement' section
6. Run code (recommend Run Section)
-------------OUTPUT--------------
1. Output thickness/tilt measurement are in the 'thickness_determine' and 'tilt_determine' variables, repectively
2. Run 'Display thickness/tilt map' section to visualize the result
2. Aligned images are in the 'img_align_cell' cells. call 'Img_series_Looper(img_align_cell, name_list)' to view
3. Center, shift and rotation angle of PACBEDs can be found in 'para_in' cell



main_Hybrid_CNN_LSF_demo.m
-----------FUNCTION--------------
1. Align PACBEDs using CNN
2. The thickness and tilt measurement serves as initial input to LSF
3. Fast LSF to measure PACBED thickness and tilt
-----------HOW TO RUN------------
1. Contact Prof. LeBeau to get all large network files and simulations before run the code
2. Setup LSF search range in the 'LSF Parameter Setup' section
3. Setup network name correctly in the 'CNN - load NN model for PACBED' section
4. Setup input data in the 'load data' section, you can call file_load function for direct input from image files
5. Setup parameters in the 'CNN - Image alignment and thickness/tilt measurement from CNN' section
6. Setup parameters in the 'LSF - get tilt label number and its neighbour list' section
6. Run code (recommend Run Section)
-------------OUTPUT--------------
1. Output CNN thickness/tilt measurement are in the 'thickness_determine_CNN' and 'tilt_determine_CNN' variables, repectively
2. Output LSF thickness measurement is in the 'thickness_determine_LSF' variable
3. Output LSF tilt measurement (component along [100] and [010] direction, amplitude, azimuth angle) are in the 'tilt_HG', 'tilt_r', and tilt_azimuth' variables.
4. Run 'Look at the best match and the difference' section to visualize the result
5. Final and intermediate result from LSF can be found in 'data_out' cell



If you find this software package is useful, please cite:
Weizong Xu, James M. LeBeau, A Deep Convolutional Neural Network to Analyze Position Averaged Convergent Beam Electron Diffraction Patterns, arXiv:XXXX.XXXXX, 2017
